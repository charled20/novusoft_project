// Datatable control
.dt-control {
  background: url("https://www.datatables.net/examples/resources/details_open.png") no-repeat center center;

  .dt-hasChild & {
    background: url("https://www.datatables.net/examples/resources/details_close.png") no-repeat center center;
  }
}

.dataTable {
  width: 100% !important;
  max-width: none !important;
  margin-top: $datatable-spacer !important;
  margin-bottom: $datatable-spacer !important;
  border-collapse: separate !important;
  border-spacing: 0;
  clear: both;

  .dt-left { text-align: left; }
  .dt-right { text-align: right; }
  .dt-center, .dataTables_empty { text-align: center; }
  .dt-justify { text-align: justify; }
  .dt-nowrap { white-space: nowrap; }

  thead,
  tfoot {
    .dt-head-left { text-align: left; }
    .dt-head-right { text-align: right; }
    .dt-head-center { text-align: center; }
    .dt-head-justify { text-align: justify; }
    .dt-head-nowrap { white-space: nowrap; }
  }

  tbody {
    .dt-body-left { text-align: left; }
    .dt-body-right { text-align: right; }
    .dt-body-center { text-align: center; }
    .dt-body-justify { text-align: justify; }
    .dt-body-nowrap { white-space: nowrap; }
  }

  td,
  th {
    box-sizing: content-box;

    // Modifier class to disable content wrapping
    .nowrap & { white-space: nowrap; }

    // Align empty and loading message to center
    &.dataTables_empty { text-align: center; }
  }

  > thead {
    > tr {
      > th,
      > td {
        &:active {
          outline: none;
        }

        &:not(.sorting_disabled) {
          padding-right: $datatable-sorting-spacer;
        }
      }
    }

    // Add space for arrow beside table header
    .sorting,
    .sorting_asc,
    .sorting_desc,
    .sorting_asc_disabled,
    .sorting_desc_disabled {
      cursor: pointer;
      position: relative;
      vertical-align: middle;
    }

    .sorting_asc,
    .sorting_desc,
    .sorting_asc_disabled,
    .sorting_desc_disabled {
      position: relative;
      cursor: pointer;
    }
    
    // Add arrow for table columns sorting
    .sorting_desc,
    .sorting_desc_disabled {
      @include caret(down) {
        position: absolute;
        bottom: 45%;
        color: $datatable-sorting-color;
        right: $datatable-sorting-offset;
        transition: none !important;
      }
    }

    .sorting_asc,
    .sorting_asc_disabled {
      @include caret(up) {
        position: absolute;
        top: 45%;
        color: $datatable-sorting-color;
        right: $datatable-sorting-offset;
        transition: none !important;
      }
    }

    // Show caret 
    .sorting_asc,
    .sorting_desc {
      &:after {
        opacity: 1;
      }
    }

    // Hide caret 
    .sorting_asc_disabled,
    .sorting_desc_disabled {
      &:after {
        opacity: 0;
      }
    }
  }
}

// Outer containment for all datatable components
.dataTables_wrapper {
  // Length menu containment
  .dataTables_length {
    margin-bottom: $datatable-input-spacer;

    label {
      text-align: left;
      white-space: nowrap;
    }
    // Total row per page option element
    select {
      width: auto;
      display: inline-block;
      margin: 0 $datatable-input-spacer;
    }
  }
  // Search input containment
  .dataTables_filter {
    text-align: right;
    margin-bottom: $datatable-input-spacer;

    label {
      text-align: left;
      white-space: nowrap;
    }
    // Search input element
    input {
      width: auto;
      display: inline-block;
      margin-left: $datatable-input-spacer;
    }
  }
  // Display information of row number
  .dataTables_info {
    padding-top: $datatable-info-spacer;
    white-space: nowrap;
  }
  // Table pagination containment
  .dataTables_paginate {
    margin: 0;
    text-align: right;
    white-space: nowrap;
    // Styling pagination
    .pagination {
      white-space: nowrap;
      justify-content: flex-end;
      margin: $datatable-spacer 0;
    }
  }

  .dataTables_processing {
    position: absolute;
    width: $datatable-process-width;
    padding: $datatable-process-padding-y $datatable-process-padding-x;
    text-align: center;
    top: 50%;
    left: 50%;
    transform: translate(-50%, 50%);
  }
}

// Remove margin on the table for scrollable header
.dataTables_scrollHead {
  .dataTable {
    margin-bottom: 0 !important;
  }

  .table-bordered {
    border-bottom-width: 0;
  }
}

// Scrollable table body
.dataTables_scrollBody table {
  border-top: none;
  margin-top: 0 !important;
  margin-bottom: 0 !important;

  // Hide caret on scrollable body
  thead {
    .sorting,
    .sorting_asc,
    .sorting_desc {
      &:after {
        display: none;
      }
    }
  }

  tbody tr:first-child {
    td,
    th {
      border-top: none;
    }
  }
}

// Scrollable table footer
.dataTables_scrollFoot {
  > .dataTables_scrollFootInner {
    box-sizing: content-box;

    > table {
      margin-top: 0 !important;
      border-top: none;
    }
  }
}

// Small datatable
.dataTable.table-sm {
  > thead > tr > th:not(.sorting_disabled) {
    padding-right: $datatable-sorting-spacer-sm;
  }

  .sorting,
  .sorting_asc,
  .sorting_desc {
    &:after {
      right: $datatable-sorting-offset-sm;
    }
  }
}

// Fix duplication border when datatable has .table-bordered class from bootstrap
.dataTable.table-bordered {
  border-right-width: 0;

  th, td {
    border-left-width: 0;
    border-bottom-width: $table-border-width;

    &:first-child {
      border-left-width: $table-border-width;
    }

    &:last-child {
      border-right-width: $table-border-width;
    }
  }

  thead tr:first-child {
    th, td {
      border-top-width: $table-border-width;
    }
  }
}

.table-responsive {
  > .dataTables_wrapper {
    > .row {
      margin: 0;

      > [class^=col-]:first-child {
        padding-left: 0;
      }
      > [class^=col-]:last-child {
        padding-right: 0;
      }
    }
  }
}

// Align control elements to center for small devices
@include media-breakpoint-down("sm") {
  .dataTables_wrapper {
    .dataTables_length,
    .dataTables_filter,
    .dataTables_info,
    .dataTables_paginate {
      text-align: center;
    }

    .dataTables_paginate .pagination {
      justify-content: center;
      margin-top: $datatable-input-spacer;
    }
  }
}